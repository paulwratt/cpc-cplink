0000                             ; fifo_in_byte
0000                             ; 
0000                             ; Read a single byte and store it in the location pointed to by
0000                             ; a parameter
0000                             ; 
0000                             ; Entry:
0000                             ;  ptr      IX+127/6 - Param: ptr to memory to store result
0000                             ;  ret addr IX+125/4
0000                             ;  old IX   IX+123/2
0000                             ;  vec ptr  IX+121/0
0000                             ;  f        IX+119/8 - local var init to 0 used to return result
0000   DD 66 7F               LD   h,(ix+127)   ; HL points to RX buffer
0003   DD 6E 7E               LD   l,(ix+126)   
0006   01 81 FD               LD   bc,0xfd81   ; bc points to status register
0009   ED 78                  IN   a,(c)   ; get DOR status flag
000B   E6 01                  AND   0x1   
000D   28 03                  JR   z,end   ; go to end if no data available
000F   0D                     DEC   c   ; point to data reg
0010   ED A2                  INI      ; (HL)<-IN(bc), HL++, B--
0012                END:         
0012   DD 77 76               LD   (ix+118),a   ; write status back
